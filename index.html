<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>first partytown</title>
  <!-- <script src="node_modules/.bin/~partytown/debug/partytown.js"></script> -->
  <script src="~partytown/debug/partytown.js"></script>
  <script>
    partytown = {
      forward: ['dataLayer.push'],
      logCalls: true,
      logGetters: true,
      logSetters: true,
      logStackTraces: false,
      logScriptExecution: true,
      logMainAccess: true,
    };
  </script>
</head>
<body>
  <h1>fetch() / XMLHttpRequest</h1>
    <ul>
      <li>
        <strong>window.fetch(url) text</strong>
        <code>
          <span id="testFetchText"></span>
        </code>
        <script type="text/partytown">
          (async function () {
            const elm = document.getElementById('testFetchText');
            const rsp = await window.fetch('text.txt');
            const text = await rsp.text();
            elm.textContent = text;
            elm.className = 'testFetchText';
          })();
        </script>
      </li>

      <script type="text/partytown">
        (function () {
          document.body.classList.add('completed');
        })();
      </script>
    </ul>
</body>
</html>